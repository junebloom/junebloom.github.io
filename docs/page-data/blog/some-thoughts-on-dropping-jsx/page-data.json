{"componentChunkName":"component---src-templates-blog-post-template-js","path":"/blog/some-thoughts-on-dropping-jsx","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Some Thoughts On Dropping JSX","date":"2020-11-02"},"timeToRead":5,"html":"<p>Recently I was working on <a href=\"https://github.com/junebloom/practical\">an application</a> which started out both as an experiment in writing a zero-dependency and no-build-step web app, and as an actual tool I needed for myself.</p>\n<p>When I started, I had a very small custom VDOM, and the components I wrote for it were in plain JS. But after running in to limitations with my VDOM, I chose to switch to React for the sake of completing the project, rather than reinvent the wheel. <em>(I'll totally give reinventing the wheel another shot, though!)</em></p>\n<p>So I swapped in React and started translating my components to JSX, but after doing so I thought they seemed less readable than before. How could this be? Well I wrote the components without JSX in mind, so a direct translation was likely to run into some weird spots. Compare passing props in JS and JSX for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createElement <span class=\"token keyword\">as</span> h <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token comment\">// In plain JS we just pass an object:</span>\n<span class=\"token function\">h</span><span class=\"token punctuation\">(</span>RecordingsList<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> recordings<span class=\"token punctuation\">,</span> player <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// In JSX we have to either repeat the property names...</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RecordingsList</span></span> <span class=\"token attr-name\">recordings</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>recordings<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">player</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>player<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ...or use object spreading in an odd way:</span>\n<span class=\"token operator\">&lt;</span>RecordingsList <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span> recordings<span class=\"token punctuation\">,</span> player <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p><em>(What is our object spreading in to, exactly? An implied object literal that will only be present after transpiling, it seems. It feels icky to write an invalid JS expression and then rely on the transpiler to complete it. It also seems silly to create an object literal whose sole purpose is to be spread.)</em></p>\n<p>Instead of forcing my components to fit into JSX, I tried dropping JSX entirely. This also let me stay closer to the original no-build-step spirit of the project. And it turns out that I had almost no problems foregoing JSX. For application UI, it felt pretty natural to write and consume components using plain JS.</p>\n<p><em>But this doesn't mean that this will always be the case, or that JSX is bad.</em> In fact, I think JSX is a very good solution for its problem domain, and virtually every React application benefits from it. In practice, the quirks mentioned above are only problematic in narrow circumstances, and using plain <code class=\"language-text\">createElement</code> calls can only scale so far before becoming unwieldy.</p>\n<p>For example, a good use-case for JSX is in the <a href=\"https://github.com/junebloom/practical/blob/develop/src/components/Footer.js\">Footer component</a> of my app. It is an area that makes use of nested hypertext elements, and I had to simplify its layout to keep the code readable. Writing such components using some kind of domain-specific HyperTextMarkupLanguage-based syntax would be great!</p>\n<p>I noticed that with <code class=\"language-text\">createElement</code>, components can quickly become difficult enough to read that it starts to take significant effort to \"visually optimize\" the structure of the markup to keep it simple enough to understand. This can be seen as a negative or a positive, as it can impact productivity, but with the possible benefit of encouraging more thoughtful markup.</p>\n<p>Compare plain JS to the JSX for a component from the site you're currently on:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">\"li\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      href<span class=\"token punctuation\">,</span>\n      className<span class=\"token operator\">:</span>\n        <span class=\"token string\">\"flex items-center md:grid grid-rows-3 gap-4 md:gap-0 p-4 md:h-56 hover:no-underline bg-indigo-100 text-indigo-600 hover:bg-red-400 hover:text-white group\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> className<span class=\"token operator\">:</span> <span class=\"token string\">\"row-start-2 md:mx-auto text-2xl\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>Icon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        className<span class=\"token operator\">:</span>\n          <span class=\"token string\">\"row-start-3 flex-grow flex md:flex-col justify-between md:text-center leading-5\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"span\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> className<span class=\"token operator\">:</span> <span class=\"token string\">\"text-lg\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"span\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> className<span class=\"token operator\">:</span> <span class=\"token string\">\"font-semibold text-indigo-400 group-hover:text-white\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        subtitle\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span>\n    <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>href<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>flex items-center md:grid grid-rows-3 gap-4 md:gap-0 p-4 md:h-56 hover:no-underline bg-indigo-100 text-indigo-600 hover:bg-red-400 hover:text-white group<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>row-start-2 md:mx-auto text-2xl<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Icon</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>row-start-3 flex-grow flex md:flex-col justify-between md:text-center leading-5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-lg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>font-semibold text-indigo-400 group-hover:text-white<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>subtitle<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>The differences aren't huge, but which one would you rather maintain?</p>\n<p>Personally, I find the JSX easier to read. Props, children, and siblings are all separated very clearly, so it takes no effort to distinguish them at a glance. The same isn't true of the <code class=\"language-text\">createElement</code> calls.</p>\n<p>There is middle ground, of course. You could write an abstraction or use a library that wraps <code class=\"language-text\">createElement</code> to make it nicer to use, but ECMAScript syntax is still designed to be general-purpose. Maybe there's a point at which a domain-specific syntax for writing markup just makes things easier.</p>\n<p>But that won't stop my search for better solutions. I <em>want</em> authoring components in pure ECMAScript to be the best experience possible. I <em>don't want</em> a build step, or a bloated, fragile layer of nonstandard tools with a million dependencies between my code and the user.</p>\n<p>Luckily, there are plenty of interesting ideas to be explored. The seed of the concept that will make JSX obsolete has probably already been planted. It will be enticing in its expressiveness and subtle in its simplicity.</p>\n<p>And with the pace of progress on the web, the day when we can publish production-ready projects using nothing but our favorite text editor and browser doesn't feel so distant.</p>\n<hr>\n<p>While writing this, I started to wonder about something else as well. What does JSX actually <em>mean</em>?</p>\n<p><a href=\"https://reactjs.org/docs/introducing-jsx.html#why-jsx\">React's docs</a> give some basic justifications for JSX, and the <a href=\"https://facebook.github.io/jsx/\">JSX specification</a> gives some slightly more nuanced justifications, particularly regarding the alternative of template literals, but neither explains the rationale for the name itself.</p>\n<p>Is it <strong>J</strong>avascript <strong>S</strong>yntax e<strong>X</strong>tension? <strong>J</strong>ava<strong>S</strong>cript e<strong>X</strong>tension? <strong>J</strong>ava<strong>S</strong>cript <strong>X</strong>ML? Something else?</p>\n<p>The spec states:</p>\n<blockquote>\n<p>JSX is an XML-like syntax extension to ECMAScript without any defined semantics.</p>\n</blockquote>\n<p>Maybe it is the case that, like the extension itself, the name has no defined semantics. It's just JSX.</p>"}},"pageContext":{"slug":"/blog/some-thoughts-on-dropping-jsx"}},"staticQueryHashes":["3159585216","63159454"]}